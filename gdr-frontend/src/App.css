/* ============================================= */
/* LAYOUT PRINCIPALE DEL GIOCO                   */
/* ============================================= */
.game-container {
  display: grid;
  height: 100vh;
  /* Definiamo le colonne: 250px, spazio flessibile, 250px */
  grid-template-columns: 250px 1fr 290px;
  /* Aumentiamo l'altezza dell'header per dare più spazio al titolo */
  grid-template-rows: 140px 1fr; 
  grid-template-areas:
    "header header header"
    "sidebar-left main-content sidebar-right";
  gap: 5px;
  box-sizing: border-box;
}

/* Aree del layout */
.left-sidebar { 
  grid-area: sidebar-left; 
  overflow-y: auto; 
  border-radius: 5px;
}
.main-content { 
  grid-area: main-content; 
  position: relative; 
  border-radius: 5px;
}

.content-wrapper {
  max-width: 1520px;
  max-height: 800px;
  width: 100%;
  height: 100%;
  margin: 0 auto;
  margin-top: 1.5%;
  position: relative;

  /* AGGIUNGI QUESTO: fa spazio per la cornice sopra e sotto */
  padding-top: 5px;
  padding-bottom: 5px;
  box-sizing: border-box; /* Assicura che il padding non alteri le dimensioni massime */
}


/* ============================================= */
/* CORNICE PER IL CONTENT WRAPPER                */
/* ============================================= */

/* Stile comune per entrambe le cornici (superiore e inferiore) */
.content-wrapper::before,
.content-wrapper::after {
  content: ''; /* Obbligatorio per creare l'elemento */
  position: absolute; /* Lo posiziona rispetto al .content-wrapper */
  left: 0;
  right: 0;
  height:3px; /* MODIFICA QUI: L'altezza della tua cornice */
  
  /* Applica la tua immagine piastrellabile */
  background-image: url('/frames/top.frame.png'); /* <-- CONTROLLA CHE IL PERCORSO SIA GIUSTO! */
  background-repeat: repeat-x;
  background-size: auto 5px; /* L'immagine si adatta all'altezza */
  
  pointer-events: none; /* La cornice non sarà cliccabile */
}

/* Posiziona la cornice SUPERIORE */
.content-wrapper::before {
  top: 0;
}

/* Posiziona la cornice INFERIORE */
.content-wrapper::after {
  bottom: 0;
  /* Un tocco di classe: capovolge l'immagine per un effetto specchiato ✨ */
  transform: scaleY(-1);
}

.right-sidebar { 
  grid-area: sidebar-right;
  border-radius: 5px;
  padding-right: 10px;
}


/* ============================================= */
/* HEADER E TITOLO                               */
/* ============================================= */
.game-header {
  grid-area: header;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 20px;
  z-index: 20;

  position: relative;
  /* --- MODIFICA QUESTE RIGHE PER IL BACKGROUND --- */
  /* Imposta le immagini in ordine di sovrapposizione: cornice sopra, pattern sotto */
  background-image: 
    url('/frames/top.frame.png'), /* Prima immagine: la cornice (disegnata sopra) */
    url('/backgrounds/darkstone.png'); /* Seconda immagine: il pattern (disegnata sotto) */
  
  /* Imposta la ripetizione per entrambe le immagini, in ordine */
  background-repeat: repeat-x, repeat; /* La cornice si ripete solo in X, il pattern si ripete in tutte le direzioni */

  /* Imposta la posizione per entrambe le immagini, in ordine */
  background-position: bottom center, center center; /* La cornice in basso, il pattern centrato */

  /* Imposta la dimensione per entrambe le immagini, in ordine */
  background-size: auto 3px, auto; /* La cornice alta 30px, il pattern a dimensione originale (o come vuoi tu) */
  /* Se vuoi anche un colore di backup (ad esempio se le immagini non si caricano) */
  background-color: #1a0f26; /* Un viola molto scuro/nero, come backup */
}


.game-title {
  font-family: 'goat', sans-serif; /* Font personalizzato */
  color: #e6e0ff;
  font-size: 5.8rem; 
  margin: 0;
  
  /* Centratura e posizionamento */
  position: absolute;
  top: 15px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 21; 
  pointer-events: none; 

  /* Effetto NEON */
  text-shadow:
    0 0 7px #bfc0d1,
    0 0 15px #bfc0d1,
    0 0 30px #60519b,
    0 0 50px #60519b,
    0 0 70px #60519b;
}

.header-actions {
    display: flex;
    align-items: center;
}

.game-title-image {
  position: absolute;
  top: 2px; /* Regola questo valore. Se vuoi che sbordi un po' in basso, potrebbe servire un valore negativo o 0, e poi usare un margin-bottom */
  left: 50%;
  transform: translateX(-50%);
  z-index: 21;
  pointer-events: none;

  /* --- MODIFICHE QUI --- */
  height: 210px; /* Imposta l'altezza desiderata, ad esempio l'altezza del tuo top menu */
  width: auto;   /* Lascia che la larghezza si adegui automaticamente per mantenere le proporzioni */
  /* Oppure, se vuoi impostare la larghezza e lasciare che l'altezza si adegui: */
  /* width: 450px; */
  /* height: auto; */

  /* Questa proprietà è utile se imposti entrambe le dimensioni e vuoi controllare come l'immagine si adatta, ma con 'auto' non è strettamente necessaria.
     Tuttavia, è una buona pratica se vuoi essere sicuro che non si deformi mai. */
  object-fit: contain; /* Assicura che l'immagine si adatti all'area mantenendo le proporzioni senza tagliare. 'cover' la riempirebbe tagliando i bordi, 'fill' la deformerebbe (come stava succedendo). */

  max-width: none; /* Lascia pure questo per sicurezza */

  /* Se vuoi un leggero effetto di "glow" anche sull'immagine (opzionale)*/
  filter: drop-shadow(0 0 5px #000000) drop-shadow(1px 0px 4px #000000ba);
}

/* ============================================= */
/* STILE PER I BOTTONI DELL'HEADER               */
/* ============================================= */
.header-btn {
  /* Sfondo con texture e velo nero */
  background-image: url(/backgrounds/cloudy.png);
  background-size: cover;
  background-color: rgba(23, 23, 23, 0.5);
  background-blend-mode: multiply;

  /* Testo */
  color: #bfc0d1;
  font-family: 'Work Sans', sans-serif;
  font-weight: normal;
  text-transform: uppercase;
  font-size: 14px;
  text-decoration: none;

  /* Dimensioni e Bordo */
  padding: 0 20px; /* Rimuoviamo il padding verticale perché useremo un'altezza fissa */
  border: 1px solid #31323e;
  border-radius: 0;
  margin-left: 10px;

  /* Effetti */
  cursor: pointer;
  transition: all 0.2s ease;

  /* --- AGGIUNTE PER UNIFORMARE L'ALTEZZA --- */
  display: inline-flex;  /* Tratta tutti gli elementi come box flessibili */
  align-items: center;   /* Centra il testo verticalmente all'interno */
  box-sizing: border-box;  /* Assicura che il padding e i bordi non alterino la dimensione */
  height: 35px;          /* Imposta un'altezza fissa e uguale per tutti */
}

.header-btn:hover {
  background-color: rgba(96, 81, 155, 0.5); /* Il tuo viola, ma semitrasparente */
  color: white;
  border-color: #60519b;
}


/* --- STILI PER IL BANNER EVENTO --- */
.event-banner-container {
  width: 450px;
  height: 100px;
  position: relative; /* Contenitore per gli elementi interni */
  border-radius: 4px;
  
  /* Cornice blurred viola/rosa */
  box-shadow: 
    0 0 5px rgba(255, 105, 180, 0.8),  /* Rosa */
    0 0 10px rgba(255, 105, 180, 0.6),
    0 0 15px rgba(138, 43, 226, 0.7), /* Viola */
    0 0 20px rgba(138, 43, 226, 0.5),
    inset 0 0 10px rgba(0, 0, 0, 0.5); /* Ombra interna */
  
  border: 1px solid rgba(255, 105, 180, 0.7);
}

.event-banner-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.event-banner-title {
  position: absolute;
  bottom: -25px;
  right: 8px;
  font-family: 'Goat', sans-serif;
  color: #ef30bf;
  font-size: 3rem;
  font-weight: bold;
  
  /* Stessa text-shadow del titolo principale */
  text-shadow:
    0 0 4px #bfc0d1,
    0 0 8px #000000,
    0 0 12px #000000;
}

/* ============================================= */
/* COMPONENTI SPECIFICI DEL GIOCO                */
/* ============================================= */

/* Stile per la mappa e gli hotspot */
.map-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 5px;
}

.hotspot-button {
  position: absolute;
  padding: 10px 15px;
  background-color: rgba(30, 32, 44, 0.8);
  color: #000000;
  border: 1px solid #000000;
  border-radius: 5px;
  cursor: pointer;
  transform: translate(-50%, -50%);
  backdrop-filter: blur(2px);
  transition: all 0.2s ease;
}

.hotspot-button:hover {
    background-color: #60519b;
    color: white;
}

/* Stili per la scheda personaggio (se necessari) */
.scheda-container { 
  padding: 10px; 
}

/* ============================================= */
/* STILI PER LA MAPPA MOSAICO                    */
/* ============================================= */

/* Contenitore principale della mappa (già esistente, ma assicurati che ci sia) */
.map-container {
  width: 100%;
  height: 100%;
  position: relative;
  overflow: hidden; 
}

/* Griglia per il mosaico */
.map-tile {
  position: absolute;
  cursor: pointer;
  opacity: 0; /* Rende l'immagine completamente trasparente di default */
  transition: opacity 0.3s ease-in-out, filter 0.3s ease-in-out; /* Aggiunge una transizione fluida */;
  filter: drop-shadow(0 0 3px rgba(0, 0, 0, 0.5));
}

.map-tile:hover {
  opacity: 1; /* Rende l'immagine completamente visibile al passaggio del mouse */
  transform: scale(1.00);
  filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.9)) drop-shadow(0 0 15px rgba(0, 0, 0, 0.7));
}

/* Stile per il pulsante "Torna Indietro" nelle sottomappe */
.back-button {
  position: absolute;
  top: 20px;
  left: 20px;
  /* Puoi usare la classe .btn o .header-btn se vuoi lo stesso stile */
  padding: 10px 15px;
  background-color: rgba(30, 32, 44, 0.8);
  color: #bfc0d1;
  border: 1px solid #60519b;
  border-radius: 5px;
  cursor: pointer;
  z-index: 10;
}

/* ============================================= */
/* ANIMAZIONI                                    */
/* ============================================= */
@keyframes glow {
  from {
    box-shadow: 0 0 1px #c166d181, 0 0 1px #8f44ad;
  }
  to {
    box-shadow: 0 0 10px #c166d181, 0 0 20px #8f44ad;
  }
}

@keyframes marquee {
  0%   { transform: translateX(100%); }
  100% { transform: translateX(-100%); }
}

/* ============================================= */
/* STILI PER LA SIDEBAR SINISTRA (POST-PLAYER)   */
/* ============================================= */

.sidebar-icon-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
  margin-top: 20px;
}

.sidebar-icon-button {
  background-color: #2a292f;
  border: 1px solid #31323e;
  border-radius: 3px;
  padding: 10px;
  cursor: pointer;
  transition: all 0.2s ease-in-out;
  text-align: center;
  color: #a4a5b9;
  font-size: 11px;
  font-family: 'Work Sans', sans-serif;
}

.sidebar-icon-button img {
  width: 24px;
  height: 24px;
  margin-bottom: 5px;
  transition: filter 0.2s ease;
}

.sidebar-icon-button:hover img {
  filter: drop-shadow(0 0 4px rgba(0, 0, 0, 0.8));
}

.sidebar-icon-button.active img {
  filter: drop-shadow(0 0 6px #c8a2c8) drop-shadow(0 0 12px #c8a2c8);
}

.news-visor-container {
  width: 100%;
  height: 80px;
  margin: 20px 0;
  background-color: black;
  border: 1px solid #31323e;
  border-radius: 3px;
  padding: 8px;
  box-sizing: border-box;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.news-visor-title {
  font-family: 'ArcadeClassic', monospace; /* Assicurati che il nome sia corretto */
  color: #c466d1; /* Viola acceso */
  font-size: 16px;
  text-transform: uppercase;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  margin-bottom: 5px;
}

.news-visor-preview {
  color: #a4a5b9; /* Colore di default */
  font-size: 12px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

@keyframes news-fade-in-out {
  0% {
    opacity: 0;
    transform: translateY(20px);
  }
  10%, 90% {
    opacity: 1;
    transform: translateY(0);
  }
  100% {
    opacity: 0;
    transform: translateY(-20px);
  }
}

@keyframes gold-flash {
  0%, 100% {
    /* Ombra leggera di base */
    filter: drop-shadow(0 0 3px rgba(255, 215, 0, 0.4));
  }
  50% {
    /* Ombra più intensa e brillante a metà animazione */
    filter: drop-shadow(0 0 12px rgba(255, 215, 0, 1)) brightness(1.7);
  }
}

.new-message-flash {
  /* Applica l'animazione in loop */
  animation: gold-flash 1.5s infinite;
  border-radius: 50%; /* Opzionale: rende l'effetto più morbido su icone tonde */
}